/*!
 * jQuery-TOC
 * Table of Contents Generator Plugin for (non-)jQuery
 * 
 * @author Dolphin Wood <dolphin.w.e@gmail.com>
 * @version 0.0.5
 * Copyright 2015. MIT licensed.
 */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";var e=function(n){if("string"!=typeof n)return 0;var e=n.match(/\d/g);return e?Math.min.apply(null,e):1},t=function(e,t){for(;t--;)e=n("<ol/>").appendTo(e),t&&(e=n("<li/>").appendTo(e));return e},r=function(n,e){for(;e--;)n=n.parent();return n},o=function(n,e){return function(t,r,o){var i=t.text(),a=e+"-"+o;r.text(i);var c=t[0],f=r[0],u=n?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(i){var a=i.selector,c=i.scope,f=n("<ol/>"),u=f,h=null,p=e(a),s=o(i.overwrite,i.prefix);return n(c).find(a).each(function(o,i){var a=e(i.tagName),c=a-p;c>0&&(u=t(h,c)),0>c&&(u=r(u,2*-c)),u.length||(u=f);var l=n("<li/>"),d=n("<a/>");s(n(i),d,o),l.append(d).appendTo(u),h=l,p=a}),f};n.fn.initTOC=function(e){var t={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};e=n.extend(t,e);var r=e.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");n(this).append(i(e));var o=location.hash;return o&&setTimeout(function(){location.hash="",location.hash=o},0),n(this)}});